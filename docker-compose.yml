zabbix-db-storage:
  image: busybox:latest
  container_name: zabbix-db-storage
  volumes:
    - /var/lib/mysql

zabbix-db:
  image: zouyapeng/zabbix-db-mariadb
  container_name: zabbix-db
  volumes:
    - /opt/volumes/mysql/backups:/backups
    - /etc/localtime:/etc/localtime:ro
  volumes_from:
    - zabbix-db-storage
  environment:
    - MARIADB_USER=zabbix
    - MARIADB_PASS=zabbix

zabbix-server:
  image: zouyapeng/zabbix-3.0:latest
  container_name: zabbix-server
  ports:
    - "80:80"
    - "10051:10051"
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - /opt/volumes/zabbix/alertscripts:/usr/local/share/zabbix/alertscripts
  links:
    - zabbix-db:zabbix.db
  environment:
    - ZS_DBHost=zabbix.db
    - ZS_DBUser=zabbix
    - ZS_DBPassword=zabbix
    - ZW_ZBX_SERVER=localhost
    - ZW_ZBX_SERVER_NAME=ZBXS
